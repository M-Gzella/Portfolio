"use strict";var menu_items,theme_btn,body,wrapper,hamburger_btn,close_menu_btn,menu_mobile,menu_options_mobile,slide_hover_btns,slider_btn_next,slider_btn_prev,slider,sliders,skill_cards,sections,dots,stars,root,currentSlide=0,areThereStars=!1,startX=null,startY=0,phoneQuery=window.matchMedia("(max-width: 480px)"),tabletQuery=window.matchMedia("(max-width: 768px)"),desktopQuery=window.matchMedia("(min-width: 768px)"),main=function(){prepareDOMElements(),prepareDOMEvents(),setTheme()},prepareDOMElements=function(){theme_btn=document.querySelector(".theme_btn"),body=document.querySelector("body"),hamburger_btn=document.querySelector(".hamburger_btn"),close_menu_btn=document.querySelector(".close_menu"),menu_mobile=document.querySelector(".menu_mobile"),menu_options_mobile=document.querySelectorAll(".menu_mobile li"),root=document.documentElement,sections=document.querySelectorAll(".wrapper .section"),dots=document.querySelectorAll(".global_nav ul li a"),menu_items=document.querySelectorAll("a.menu"),slide_hover_btns=document.querySelectorAll(".slide a"),slider_btn_prev=document.querySelector(".prev_btn"),slider_btn_next=document.querySelector(".next_btn"),sliders=document.querySelectorAll(".slide"),slider=document.querySelector(".slider"),wrapper=document.querySelector(".wrapper"),skill_cards=document.querySelectorAll(".skill_card")},prepareDOMEvents=function(){theme_btn.addEventListener("click",changeTheme),hamburger_btn.addEventListener("click",menuHandler),close_menu_btn.addEventListener("click",menuHandler),menu_options_mobile.forEach(function(e){return e.addEventListener("click",menuHandler)}),desktopQuery.matches&&window.addEventListener("wheel",throttledWheel),tabletQuery.matches&&(wrapper.addEventListener("touchstart",function(e){e=e.touches[0];startY=e.clientY}),wrapper.addEventListener("touchmove",throttledTouch)),dots.forEach(function(e){return e.addEventListener("click",dotActiveHandler)}),menu_items.forEach(function(e){return e.addEventListener("click",menuItemActiveHandler)}),slide_hover_btns.forEach(function(e){return e.addEventListener("mouseover",hoverOver)}),slide_hover_btns.forEach(function(e){return e.addEventListener("mouseout",hoverOut)}),slider_btn_next.addEventListener("click",nextSlide),slider_btn_prev.addEventListener("click",prevSlide),slider.addEventListener("touchstart",function(e){startX=e.touches[0].clientX}),slider.addEventListener("touchmove",throttledDeltaX),slider.addEventListener("touchend",function(){startX=null}),phoneQuery.matches&&skill_cards.forEach(function(e){return e.addEventListener("click",throttledSkillCard)})},changeTheme=function(){var e;"light_theme"===body.classList.value?(e=JSON.parse(localStorage.getItem("theme")),body.classList.remove("light_theme"),body.classList.add("dark_theme"),e=body.classList.value,rootColorsDark(),localStorage.setItem("theme",JSON.stringify(e))):"dark_theme"===body.classList.value&&(e=JSON.parse(localStorage.getItem("theme")),body.classList.remove("dark_theme"),body.classList.add("light_theme"),e=body.classList.value,rootColorsLight(),localStorage.setItem("theme",JSON.stringify(e)))},rootColorsLight=function(){root.style.setProperty("--main-theme","#6FDCBF"),root.style.setProperty("--accent-theme","#F6F4F6"),root.style.setProperty("--text-theme","#404040")},rootColorsDark=function(){root.style.setProperty("--main-theme","#774069"),root.style.setProperty("--accent-theme","#29272A"),root.style.setProperty("--text-theme","#FAFAFA")},menuHandler=function(){menu_mobile.classList.toggle("show")},dotActiveHandler=function(e){var t=e.target.getAttribute("href").slice(1);sections.forEach(function(e){e.classList.remove("active"),t===e.id&&e.classList.add("active")}),dots.forEach(function(e){e.classList.remove("active")}),e.target.classList.toggle("active")},checkActiveMenuItems=function(t){sections.forEach(function(e){e.classList.remove("active"),t===e.id&&e.classList.add("active")}),dots.forEach(function(e){e.classList.remove("active"),t===e.getAttribute("href").slice(1)&&e.classList.add("active")})},menuItemActiveHandler=function(e){e=e.target.getAttribute("href").slice(1);checkActiveMenuItems(e)},getCurrentSectionDesktop=function(e){var r,t=sections.length;return sections.forEach(function(e,t){e=e.getBoundingClientRect();e.top<=.5&&.5<=e.bottom&&(r=t)}),{key:e=checkScrollUp(e)?0===r?0:r-1:r===t-1?t-1:r+1,next:sections[e]}};function getCurrentSectionMobile(e){var r,t,e=e.touches[0].clientY-startY,n=sections.length;return sections.forEach(function(e,t){e=e.getBoundingClientRect();e.top<=.5&&.5<=e.bottom&&(r=t)}),100<e?t=0===r?0:r-1:e<-100&&(t=r===n-1?n-1:r+1),{key:t,next:sections[t]}}var sectionActiveHandler=function(t){sections.forEach(function(e){t.id===e.id?e.classList.add("active"):e.classList.remove("active")})},dotScrollActiveHandler=function(r){dots.forEach(function(e,t){r.key===t?e.classList.add("active"):e.classList.remove("active")})},handleActiveSectionDesktop=function(e){var e=getCurrentSectionDesktop(e),t=e.next;sectionActiveHandler(t),dotScrollActiveHandler(e),window.location.hash=t.id,window.scrollTo({behavior:"smooth",top:t.offsetTop})},handleActiveSectionMobile=function(e){var e=getCurrentSectionMobile(e),t=e.next;sectionActiveHandler(t),dotScrollActiveHandler(e),window.location.hash=t.id,window.scrollTo({behavior:"smooth",top:t.offsetTop})},checkScrollUp=function(e){return e.wheelDelta?0<e.wheelDelta:e.deltaY<0},hoverOver=function(e){e.target.closest(".slide").classList.add("hover")},hoverOut=function(e){e.target.closest(".slide").classList.remove("hover")},nextSlide=function(){var e=sliders[currentSlide].offsetWidth;currentSlide<sliders.length-1?(e=(e+20)*++currentSlide,slider.style.transform="translateX(-".concat(e,"px)")):(slider.style.transform="translateX(0)",currentSlide=0)},prevSlide=function(){var e=sliders[currentSlide].offsetWidth,t=parseInt(slider.style.transform.slice(11,-3));0<currentSlide&&(currentSlide--,slider.style.transform="translateX(".concat(t+e+20,"px)"))},checkDeltaX=function(e){null!==startX&&(0<e.touches[0].clientX-startX?prevSlide:nextSlide)()},skillCardHandler=function(e){var t=e.target.getAttribute("data-id"),r=e.target;r.classList.contains("active")?(r.style.transform="translateY(0)",skill_cards.forEach(function(e){e.classList.remove("hide"),e.classList.remove("active")})):(skill_cards.forEach(function(e){e.getAttribute("data-id")===t?r.classList.add("active"):e.classList.add("hide")}),skillCardMoveHandle(t,r))},skillCardMoveHandle=function(e,t){var r=parseInt(t.offsetHeight)+60;switch(e){case"0":setTimeout(function(){t.style.transform="translateY(0)"},300);break;case"1":setTimeout(function(){t.style.transform="translateY(-".concat(r,"px)")},300);break;case"2":setTimeout(function(){t.style.transform="translateY(-".concat(2*r,"px)")},300)}};function throttle(t,r){var n=0;return function(){var e=Date.now();r<=e-n&&(t(event),n=e)}}var createStars=function(){var e=window.innerWidth,t=window.innerHeight;if(stars=phoneQuery.matches?40:80,!1===areThereStars)for(var r=0;r<stars;r++){var n=document.createElement("span"),o=Math.floor(Math.random()*e),s=Math.floor(Math.random()*t);n.classList.add("star"),wrapper.append(n),n.style.transform="translate(".concat(o,"px, ").concat(s,"px)")}areThereStars=!0},throttledWheel=throttle(handleActiveSectionDesktop,500),throttledTouch=throttle(handleActiveSectionMobile,500),throttledDeltaX=throttle(checkDeltaX,500),throttledSkillCard=throttle(skillCardHandler,500),setTheme=function(){var e=JSON.parse(localStorage.getItem("theme"));0===e.length?e=body.classList.value:"dark_theme"===(body.classList.value=e)?rootColorsDark():"light_theme"===e&&rootColorsLight(),localStorage.setItem("theme",JSON.stringify(e))},checkJSON=function(e){try{JSON.parse(e)}catch(e){return!1}return!0};document.addEventListener("DOMContentLoaded",main),window.addEventListener("load",function(e){var t;window.location.href.includes("#")&&(t=window.location.href.split("#")[1],checkActiveMenuItems(t)),body.style.overflow="hidden",createStars()}),window.addEventListener("popstate",function(e){var t;window.location.href.includes("#")&&(t=window.location.href.split("#")[1],checkActiveMenuItems(t))}),window.addEventListener("DOMContentLoaded",function(){var e;localStorage.getItem("theme")&&0!==(e=localStorage.getItem("theme")).length&&checkJSON(e)&&Array.isArray(JSON.parse(e))||localStorage.setItem("theme",JSON.stringify([])),setTheme()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibWVudV9pdGVtcyIsInRoZW1lX2J0biIsIndyYXBwZXIiLCJoYW1idXJnZXJfYnRuIiwiY2xvc2VfbWVudV9idG4iLCJtZW51X21vYmlsZSIsInNsaWRlX2hvdmVyX2J0bnMiLCJzbGlkZXJfYnRuX25leHQiLCJzbGlkZXJfYnRuX3ByZXYiLCJzbGlkZXIiLCJzbGlkZXJzIiwic2VjdGlvbnMiLCJkb3RzIiwic3RhcnMiLCJzdGFydFgiLCJwcmVwYXJlRE9NRWxlbWVudHMiLCJjdXJyZW50U2xpZGUiLCJzdGFydFkiLCJ0YWJsZXRRdWVyeSIsImRlc2t0b3BRdWVyeSIsIm1haW4iLCJ3aW5kb3ciLCJtYXRjaE1lZGlhIiwicHJlcGFyZURPTUV2ZW50cyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsInF1ZXJ5U2VsZWN0b3IiLCJza2lsbF9jYXJkcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJjaGFuZ2VUaGVtZSIsIm1lbnVIYW5kbGVyIiwibWVudV9vcHRpb25zX21vYmlsZSIsImZvckVhY2giLCJldmVudCIsInRvdWNoIiwiZWwiLCJtYXRjaGVzIiwidGhyb3R0bGVkV2hlZWwiLCJtZW51SXRlbUFjdGl2ZUhhbmRsZXIiLCJ0b3VjaGVzIiwiY2xpZW50WSIsInRocm90dGxlZFRvdWNoIiwiZG90IiwiZG90QWN0aXZlSGFuZGxlciIsImJ0biIsImhvdmVyT3ZlciIsImNsaWVudFgiLCJob3Zlck91dCIsIm5leHRTbGlkZSIsInRocm90dGxlZERlbHRhWCIsInBob25lUXVlcnkiLCJjYXJkIiwidGhyb3R0bGVkU2tpbGxDYXJkIiwiYm9keSIsImFkZCIsInRoZW1lIiwicm9vdENvbG9yc0xpZ2h0IiwiY2xhc3NMaXN0Iiwicm9vdENvbG9yc0RhcmsiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsInJlbW92ZSIsInZhbHVlIiwic3R5bGUiLCJzZXRQcm9wZXJ0eSIsInRvZ2dsZSIsInJvb3QiLCJkb3RJZCIsImdldEF0dHJpYnV0ZSIsInNsaWNlIiwic2VjdGlvbiIsImNoZWNrQWN0aXZlTWVudUl0ZW1zIiwidGFyZ2V0IiwiaWQiLCJpdGVtSWQiLCJnZXRDdXJyZW50U2VjdGlvbkRlc2t0b3AiLCJjdXJyZW50S2V5IiwicmVjdCIsImtleSIsInNlY3Rpb25zQ291bnQiLCJsZW5ndGgiLCJnZXRDdXJyZW50U2VjdGlvbk1vYmlsZSIsIm5leHRLZXkiLCJuZXh0IiwibmV4dFNlY3Rpb24iLCJkb3RTY3JvbGxBY3RpdmVIYW5kbGVyIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wIiwiYm90dG9tIiwiZGVsdGFZIiwic2VjdGlvbkFjdGl2ZUhhbmRsZXIiLCJvZmZzZXRUb3AiLCJoYW5kbGVBY3RpdmVTZWN0aW9uTW9iaWxlIiwiY2hlY2tTY3JvbGxVcCIsIndoZWVsRGVsdGEiLCJzbGlkZSIsImRhdGEiLCJsb2NhdGlvbiIsImhhc2giLCJzbGlkZVdpZHRoIiwib2Zmc2V0V2lkdGgiLCJ0cmFuc2Zvcm0iLCJjb25jYXQiLCJwcmV2U2xpZGUiLCJzbGlkZXJUcmFuc2Zvcm0iLCJiZWhhdmlvciIsInBhcnNlSW50IiwiY2hlY2tEZWx0YVgiLCJjdXJyZW50WCIsImNsb3Nlc3QiLCJza2lsbENhcmRIYW5kbGVyIiwiY2FyZElEIiwidGhpc0NhcmQiLCJweFRvU2xpZGUiLCIkY2FyZCIsInRocm90dGxlIiwiZnVuYyIsImRlbGF5IiwibGFzdENhbGwiLCJub3ciLCJEYXRlIiwiY29udGFpbnMiLCJ3aW5kb3dIZWlnaHQiLCJpbm5lckhlaWdodCIsImFyZVRoZXJlU3RhcnMiLCJza2lsbENhcmRNb3ZlSGFuZGxlIiwiY3JlYXRlRWxlbWVudCIsIiRpZCIsIm5ld1N0YXIiLCJvZmZzZXRIZWlnaHQiLCJyYW5kb21YIiwic2V0VGhlbWUiLCJjYXJkSGVpZ2h0IiwiY2hlY2tKU09OIiwic3RyIiwiaW5uZXJXaWR0aCIsImhyZWYiLCJpbmNsdWRlcyIsInVybElkIiwic3BsaXRJZCIsIm92ZXJmbG93IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwid2luZG93V2lkdGgiLCJyYW5kb21ZIiwiaGFuZGxlQWN0aXZlU2VjdGlvbkRlc2t0b3AiLCJlIiwic3BsaXQiLCJjcmVhdGVTdGFycyIsIkFycmF5IiwiaXNBcnJheSJdLCJtYXBwaW5ncyI6ImFBQUEsSUFBSUEsV0FDQUMsVUFEQUQsS0FDQUMsUUFFQUMsY0FFQUMsZUFDQUMsWUFDQUMsb0JBR0FDLGlCQUNBQyxnQkFDQUMsZ0JBQ0FDLE9BQ0FDLFFBSUFDLFlBQ0FDLFNBRUFDLEtBR0FDLE1BZ0JFQyxLQXpCRkMsYUFBZSxFQVVmQyxjQUFVLENBQUEsRUFHUkMsT0FBQUEsS0FDQUMsT0FBQUEsRUFLQUMsV0FBT0MsT0FBSEMsV0FBUyxvQkFBQSxFQUNmUCxZQUFrQk0sT0FBRUMsV0FBQSxvQkFBQSxFQUNwQkMsYUFBa0JGLE9BQUFDLFdBQUEsb0JBQUEsRUFNZEYsS0FBR0ksV0FDUHJCLG1CQUFnQnFCLEVBQ2hCcEIsaUJBQWlCb0IsRUFDakJuQixTQUFXLENBUGYsRUFVSU0sbUJBQW9CYyxXQUNwQmIsVUFBT1ksU0FBU0MsY0FBaUIsWUFBQSxFQUNqQ3pCLEtBQUFBLFNBQWF3QixjQUFTQyxNQUFnQixFQUN0Q25CLGNBQWdCa0IsU0FBV0UsY0FBQ0QsZ0JBQTRCLEVBQ3hEakIsZUFBa0JnQixTQUFTRSxjQUFjLGFBQVksRUFDckRuQixZQUFlaUIsU0FBR0EsY0FBU0UsY0FBMEIsRUFDckRoQixvQkFBbUJlLFNBQUFBLGlCQUEwQixpQkFBQSxFQUM3Q2hCLEtBQVNlLFNBQVNFLGdCQUNsQnhCLFNBQVVzQixTQUFTRSxpQkFBYyxtQkFBVyxFQUM1Q0MsS0FBQUEsU0FBY0gsaUJBQVNDLHFCQUErQixFQUN6RHpCLFdBQUF3QixTQUFBQyxpQkFBQSxRQUFBLEVBR0tGLGlCQUFtQkMsU0FBbkJELGlCQUFnQixVQUFTLEVBQzNCdEIsZ0JBQVUyQixTQUFpQkYsY0FBU0csV0FBWSxFQUNoRDFCLGdCQUFjeUIsU0FBQUEsY0FBMEJFLFdBQVksRUFDcEQxQixRQUFBQSxTQUFld0IsaUJBQWlCLFFBQVNFLEVBQ3pDQyxPQUFBQSxTQUFvQkMsY0FBUSxTQUFFLEVBQUE5QixRQUFPMEIsU0FBQUEsY0FBaUIsVUFBU0UsRUFBYUgsWUFBQUgsU0FBQUMsaUJBQUEsYUFBQSxDQVBoRixFQWFRUCxpQkFBbUIsV0FDbkJoQixVQUFRMEIsaUJBQWlCLFFBQUFDLFdBQWMsRUFUM0MxQixjQVVzQjhCLGlCQUFnQixRQUFBSCxXQUFBLEVBVHRDMUIsZUFVaUI4QixpQkFBYSxRQUFBSixXQUFBLEVBQzFCQyxvQkFBRUMsUUFBQSxTQUFBRyxHQUFBLE9BQUFBLEVBQUFQLGlCQUFBLFFBQUFFLFdBQUEsQ0FBQSxDQUFBLEVBRU5YLGFBQUFpQixTQUVLSixPQUFRSixpQkFBRyxRQUFBUyxjQUFBLEVBQ2hCckMsWUFBa0JvQyxVQUFLbEMsUUFBUzBCLGlCQUFpQixhQUFTVSxTQUFBQSxHQUF1QkosRUFBQUQsRUFBQU0sUUFBQSxHQUVqRmpDLE9BQWlCMEIsRUFBUVEsT0FBRyxDQUFBLEVBQWlEdEMsUUFBQTBCLGlCQUFBLFlBQUFhLGNBQUEsR0FDRjdCLEtBQUFvQixRQUFBLFNBQUFVLEdBQUEsT0FBQUEsRUFBQWQsaUJBQUEsUUFBQWUsZ0JBQUEsQ0FBQSxDQUFBLEVBQzNFcEMsV0FBQUEsUUFBZ0JxQixTQUFBQSxHQUFBQSxPQUFBQSxFQUFpQkEsaUJBQWtCLFFBQUNVLHFCQUFBLENBQUEsQ0FBQSxFQUdwRDdCLGlCQUFPbUIsUUFBaUIsU0FBQWdCLEdBQUEsT0FBQUEsRUFBY2hCLGlCQUFXLFlBQUFpQixTQUFBLENBQUEsQ0FBQSxFQUM3Qy9CLGlCQUFleUIsUUFBVSxTQUFBSyxHQUFDRSxPQUFBQSxFQUFPbEIsaUJBQUEsV0FBQW1CLFFBQUEsQ0FBQSxDQUFBLEVBQ25DeEMsZ0JBQUFxQixpQkFBQSxRQUFBb0IsU0FBQSxFQUNGdkMsZ0JBQU9tQixpQkFBNEIsUUFBRXFCLFNBQWdCLEVBRWpEbkMsT0FBTWMsaUJBQU8sYUFBQSxTQUFBSyxHQUNmbkIsT0FBQW1CLEVBQUFNLFFBQUEsR0FBQU8sT0FFRixDQUFBLEVBQ0luQixPQUFBQSxpQkFBb0IsWUFBSXNCLGVBQUEsRUFMNUJ4QyxPQUs0Qm1CLGlCQUFTQSxXQUFpQixXQUE2QmQsT0FBQSxJQUNuRixDQUFBLEVBRklvQyxXQUFXZCxTQUtuQlQsWUFBQUssUUFBQSxTQUFBbUIsR0FBQSxPQUFBQSxFQUFBdkIsaUJBQUEsUUFBQXdCLGtCQUFBLENBQUEsQ0FBQSxDQUVBLEVBS1FDLFlBQWVDLFdBRWZDLElBa0JGQyxFQWxCOEIsZ0JBQTVCRCxLQUFRRixVQUFLSSxPQUdiQyxFQUFnQkMsS0FBQUMsTUFBQUMsYUFBQUMsUUFBQSxPQUFBLENBQUEsRUFDaEJELEtBQUFBLFVBQWFFLE9BQVEsYUFBY0MsRUFFdENYLEtBQVVBLFVBQUtJLElBQVMsWUFBVyxFQUU1QkYsRUFBQ0UsS0FBVVEsVUFBT0MsTUFLdEJWLGVBQWlCLEVBQ2pCSyxhQUFhRSxRQUFRLFFBQWFKLEtBQUNLLFVBQVVULENBQU8sQ0FBQSxHQUUzRCxlQUFBRixLQUFBSSxVQUFBUyxRQUVLVixFQUFlRyxLQUFHQyxNQUFsQkosYUFBQUEsUUFBd0IsT0FBQSxDQUFBLEVBQ3JCVyxLQUFNQyxVQUFBQSxPQUFZLFlBQWdCLEVBQ2xDRCxLQUFNQyxVQUFBQSxJQUFZLGFBQUEsRUFFMUJiLEVBQUFGLEtBQUFJLFVBQUFTLE1BR1FDLGdCQUFpQixFQUNqQkEsYUFBTUMsUUFBWSxRQUFBVCxLQUFrQkssVUFBVVQsQ0FBQSxDQUFBLEVBRXZELEVBR0lsRCxnQkFBc0JnRSxXQUN6QkMsS0FBQUgsTUFBQUMsWUFBQSxlQUFBLFNBQUEsRUFaR0UsS0FBS0gsTUFBTUMsWUFBWSxpQkFBa0IsU0FBUyxFQWN0REUsS0FBQUgsTUFBQUMsWUFBQSxlQUFBLFNBQUEsQ0FDQSxFQUVBVixlQUFBLFdBQ0FZLEtBQUFILE1BQUFDLFlBQUEsZUFBQSxTQUFBLEVBQ016QixLQUFBQSxNQUFBQSxZQUFtQixpQkFBbkJBLFNBQXlCLEVBQzNCMkIsS0FBTUMsTUFBUXRDLFlBQWF1QyxlQUFhLFNBQVFDLENBWnBELEVBZVEzQyxZQUFjNEMsV0FabEJyRSxZQWFnQm9ELFVBQVVILE9BQUksTUFBUyxDQVozQyxFQXNCTXFCLGlCQUFvQixTQUFBMUMsR0FDdEJ0QixJQUFRNEQsRUFBUXRDLEVBQUMyQyxPQUFBRixhQUFXLE1BQUEsRUFBQUQsTUFBQSxDQUFBLEVBQ3hCQyxTQUFRakIsUUFBUyxTQUFBaUIsR0FDYkcsRUFBT0gsVUFBVVQsT0FBRSxRQUFBLEVBQ25CUyxJQUFRakIsRUFBY29CLElBQzFCSCxFQUFBakIsVUFBQUgsSUFBQSxRQUFBLENBR0oxQyxDQUFBQSxFQUNJOEIsS0FBSWUsUUFBUyxTQUFBZixHQUNUbUMsRUFBRXBCLFVBQVNlLE9BQUFBLFFBQWEsQ0FmaEMsQ0FBQyxFQWlCR3ZDLEVBQUEyQyxPQUFBbkIsVUFBQVksT0FBQSxRQUFBLENBZlIsRUFtQlVTLHFCQUFzQk4sU0FBQUEsR0FFNUJHLFNBQUFBLFFBQUFBLFNBQUFBLEdBQ0hELEVBQUFqQixVQUFBUSxPQUFBLFFBQUEsRUFoQldZLElBQU9ILEVBQVFHLElBbUIzQkgsRUFBQWpCLFVBQUFILElBQUEsUUFBQSxDQUVBLENBQUEsRUFFQTFDLEtBQUFvQixRQUFBLFNBQUFVLEdBakJRQSxFQUFJZSxVQUFVUSxPQUFPLFFBQVEsRUFtQi9CYyxJQUFBQSxFQUFBQSxhQUEyQixNQUEzQkEsRUFBQUEsTUFBQUEsQ0FBQUEsR0FDRUMsRUFBVXZCLFVBQVNILElBQUEsUUFBQSxDQUd2QjNDLENBQUFBLENBbEJKLEVBcUJRMkIsc0JBQXVCMkMsU0FBSWhELEdBQ3ZCK0MsRUFBYUUsRUFBR04sT0FBQUosYUFBQSxNQUFBLEVBQUFDLE1BQUEsQ0FBQSxFQUV0QkUscUJBQUFHLENBQUEsQ0FuQk4sRUErQkNDLHlCQUFBLFNBQUE5QyxHQXJCRyxJQUFJK0MsRUF1QlJHLEVBQUF4RSxTQUFBeUUsT0FvQkssT0FsQkx6RSxTQUFBcUIsUUFBQSxTQUFBMEMsRUFBQVEsR0FDU0csRUFBQUEsRUFBQUEsc0JBQStCLEVBRXhCSixFQUFHL0MsS0FBTU0sSUFBZ0IsSUFBTnZCLEVBQUFBLFNBRTNCK0QsRUFBbUJFLEVBR3ZCdkUsQ0FBQUEsRUFVTyxDQUNIMkUsSUFQSU4sRUFEQUMsY0FBWWhELENBQU9nRCxFQUNILElBQUhDLEVBQUcsRUFBQUYsRUFBQSxFQUV0QkEsSUFBQUcsRUFBQSxFQUFBQSxFQUFBLEVBQUFILEVBQUEsRUFNRk8sS0FBQTVFLFNBQUEyRSxFQUVBLENBMUJKLEVBS0EsU0E4QkkzRSx3QkFBaUIrRCxHQUNiLElBR0lBLEVBQVFqQixFQUZSaUIsRUFEQWMsRUFBY2pELFFBQUttQyxHQUNEcEIsUUFBSXJDLE9BRzFCa0UsRUFBQXhFLFNBQUF5RSxPQWtCSixPQWhCSHpFLFNBQUFxQixRQUFBLFNBQUEwQyxFQUFBUSxHQUVLTyxFQUFBQSxFQUF5QkMsc0JBQXpCRCxFQUdVUixFQUFJVSxLQUFRLElBQUUsSUFBQVYsRUFBQVcsU0FDZG5DLEVBQWN5QixFQTlCMUIsQ0FBQyxFQWtDQyxJQUFBVyxFQUNMUCxFQUFBLElBQUFOLEVBQUEsRUFBQUEsRUFBQSxFQS9CY2EsRUFBUyxDQUFFLE1BaUMxQlAsRUFBQU4sSUFBQUcsRUFBQSxFQUFBQSxFQUFBLEVBQUFILEVBQUEsR0FHYyxDQUNKUSxJQUFBQSxFQUVOTSxLQUFBQSxTQUFxQk4sRUFDckJDLENBaENKLENBR0EsSUFpQ3lDRSxxQkFBaUJJLFNBQUFBLEdBQ3pEcEYsU0FBQXFCLFFBQUEsU0FBQTBDLEdBRUtzQixFQUFBQSxLQUF5QnRCLEVBQUdHLEdBQ3BCSCxFQUFHVyxVQUFBQSxJQUFBQSxRQUE2QixFQUcxQ1MsRUFBQUEsVUFBcUJOLE9BQVksUUFBQSxDQUdqQ25FLENBQUFBLENBbENKLEVBb0N5Q3NFLHVCQUFpQkksU0FBQUEsR0FDekRuRixLQUFBb0IsUUFBQSxTQUFBVSxFQUFBd0MsR0FFS2UsRUFBYWYsTUFBR0EsRUFDUmdCLEVBQUFBLFVBQVk1QyxJQUFBLFFBQUEsRUFFdEJaLEVBQUFlLFVBQUFRLE9BQUEsUUFBQSxDQUVILENBQUEsQ0FDRCxFQU1NbEIsMkJBQVlkLFNBQUFBLEdBQ2QsSUFBTWtFLEVBQVFsRSx5QkFBcUJBLENBQVMsRUFFdEN3QixFQUFnQjJDLEVBQUNiLEtBbkN2Qk8scUJBQXFCTixDQUFXLEVBdUNwQ0MsdUJBQUFXLENBQUEsRUFwQ0kvRSxPQUFPZ0YsU0FBU0MsS0FBT2QsRUFBWVgsR0F3Q25DeEQsT0FBTWtGLFNBQWE3RixDQUFBQSxTQUFRTSxTQUFjd0YsSUFBQUEsRUFBV1QsU0FBQSxDQUFBLENBckN4RCxFQXdDUUMsMEJBQWdDLFNBQUEvRCxHQUNoQ3hCLElBQU0yRixFQUFPSyx3QkFBU3hFLENBQUF5RSxFQUNuQmxCLEVBQUFZLEVBQUFiLEtBRUh2RSxxQkFBZ0J3RSxDQUFBLEVBQ3BCQyx1QkFBQVcsQ0FBQSxFQUdFTyxPQUFBQSxTQUFZTCxLQUFaSyxFQUFrQjlCLEdBRXBCeEQsT0FBTXVGLFNBQUFBLENBQWVDLFNBQUdDLFNBQWdCM0MsSUFBTXNDLEVBQVVoQyxTQUFXLENBQUMsQ0F0Q3hFLEVBeUNRd0IsY0FBbUJXLFNBQUFBLEdBQ25CbkcsT0FBQUEsRUFBTzBELFdBQ1gsRUFBQWxDLEVBQUFpRSxXQUdFYSxFQUFXbEIsT0FBRyxDQXZDcEIsRUF5Q1FoRCxVQUFjLFNBQUdaLEdBQ0YrRSxFQUFBQSxPQUFXbEcsUUFBTSxRQUFBLEVBRzVCNkYsVUFBV3JELElBQUEsT0FBQSxDQXhDdkIsRUEyQ1FQLFNBQUEsU0FBQWQsR0FDSkEsRUFBQTJDLE9BQUFxQyxRQUFBLFFBQUEsRUF2Q014RCxVQUFVUSxPQUFPLE9BQU8sQ0EwQ2xDLEVBTU1pRCxVQUFBQSxXQUNGLElBQU1DLEVBQWV2QyxRQUFPSixjQUFhZ0MsWUFDbkNZLGFBQWlCeEMsUUFBTVEsT0FBQSxHQUdoQmpCLEdBQU1zQyxFQUFZLElBRDNCVyxFQUFBQSxhQUdBekYsT0FBV3dDLE1BQUNuQyxVQUFRLGVBQUEwRSxPQUFRVyxFQUFBLEtBQUEsSUFFeEJsRSxPQUFLTSxNQUFVUSxVQUFPLGdCQUN4QmpELGFBQUEsRUF6Q1YsRUFFTTJGLFVBNENtQmxELFdBM0NyQixJQTRDUzhDLEVBQU03RixRQUFBTSxjQUFBd0YsWUFDSHJELEVBQW1CMkQsU0FBT3JHLE9BQUEwRCxNQUFBc0MsVUFBQWhDLE1BQUEsR0FBQSxDQUFBLENBQUEsQ0FBQSxFQUM5QixFQUFBekQsZUFDRkEsWUFBQSxHQUdOUCxPQUFBMEQsTUFBQXNDLFVBQUEsY0FBQUMsT0FEd0JTLEVBQWlCWixFQUFBLEdBQ3pDLEtBQUEsRUFHSixFQUVJUSxZQUFXLFNBQUE5RSxHQUNDLE9BQVJuQixTQUlJLEVBSFdtQixFQUFNTSxRQUFBLEdBQUFPLFFBQ1doQyxPQUd4QjZGLFVBRUFXLFdBRkEsQ0F6Q2hCLEVBc0RBSixpQkFBQSxTQUFBakYsR0FDQSxJQUFTc0YsRUFBU0MsRUFBTUMsT0FBT2pELGFBQUEsU0FBQSxFQUN2QmtELEVBQVl6RixFQUFBMkMsT0FFTitDLEVBQU1DLFVBQVVDLFNBQUEsUUFBQSxHQUNsQkYsRUFBTUQsTUFBUWpCLFVBQVcsZ0JBRXpCaUIsWUFBYzFGLFFBQUEsU0FBQW1CLEdBQ2xCQSxFQUFBTSxVQUFBUSxPQUFBLE1BQUEsRUFDSGQsRUFBQU0sVUFBQVEsT0FBQSxRQUFBLENBQ0wsQ0FBQSxJQUlRNkQsWUFBWTlGLFFBQVUrRixTQUFBQSxHQUVaNUUsRUFBQ2YsYUFBUyxTQUFBLElBQUErRSxFQUNWQyxFQUFBM0QsVUFBQUgsSUFBQSxRQUFBLEVBRUFILEVBQUFNLFVBQUFILElBQUEsTUFBQSxDQUdWMEUsQ0FBQUEsRUFFSUMsb0JBQXdCZCxFQUFDZSxDQUFjLEVBL0NuRCxFQW9EWWhJLG9CQUFzQixTQUFDaUksRUFBQWIsR0FqRC9CLElBbURRYyxFQUFjM0IsU0FBU2EsRUFBQWUsWUFBQTNCLEVBQWdCNEIsR0FDM0MsT0FBQUgsR0FDSixJQUFBLElBQ0FILFdBQW9CLFdBQ3ZCVixFQUFBbkQsTUFBQXNDLFVBQUEsZUFFS3BFLEVBQUFBLEdBQWMsRUFDZEksTUFDQVEsSUFBQUEsSUFDQUcsV0FBa0IsV0FFUGtFLEVBQUFuRCxNQUFYb0UsVUFBaUIsZUFBQTdCLE9BQUE4QixFQUFBLEtBQUEsQ0FDVixFQUFHN0UsR0FBSSxFQUVOeUIsTUFDTjdCLElBQVFGLElBQ1JRLFdBQWFFLFdBQ1Z1RCxFQUFBbkQsTUFBQXNDLFVBQUEsZUFBQUMsT0FBQSxFQUFBOEIsRUFBQSxLQUFBLENBQ0UvRSxFQUFBQSxHQUFTLENBcERsQixDQUNKLEVBR0EsU0FzRFFJLFNBQWFFLEVBQU8wRCxHQUN4QixJQUFBQyxFQUFBLEVBQ0gsT0FBQSxXQUVLZSxJQUFTZCxFQUFHQyxLQUFaYSxJQUFBQSxFQUNDaEIsR0FBQUUsRUFBQUQsSUFDTTlELEVBQU04RSxLQUFJLEVBQ1hoQixFQUFDQyxFQUVULENBdERKLENBMERBbkcsSUFBQUEsWUFBU0ksV0FDVFAsSUFBT08sRUFBQUEsT0FBaUIrRyxXQUNoQnRILEVBQWdCdUgsT0FBS0MsWUFTN0J4SCxHQU5Rc0QsTUFETW1FLFdBQVFDLFFBQ2RwRSxHQUVPcUUsR0FJUyxDQUFBLElBQWpCcEgsY0FDQ1AsSUFBT2dGLElBQUFBLEVBQVEsRUFBQ3VDLEVBQUkvSCxNQUFDZ0ksQ0FBQUEsR0FBUyxDQUN4QkUsSUFBVTFILEVBQU9nRixTQUFTdUMsY0FBZSxNQUFBLEVBQ2pDRyxFQUFVRSxLQUFBQyxNQUFBRCxLQUFBRSxPQUFBLEVBQUFDLENBQUEsRUFDeEJ6RSxFQUFxQm1FLEtBQU1JLE1BQUFELEtBQUFFLE9BQUEsRUFBQXJCLENBQUEsRUFFakNNLEVBQUEzRSxVQUFBSCxJQUFBLE1BQUEsRUFDSzFCLFFBQUFBLE9BQWlCd0csQ0FBQSxFQUVaN0UsRUFBUU0sTUFBQUEsVUFBYUMsYUFBQUEsT0FBZ0J3RSxFQUFBLE1BQUEsRUFBQTVCLE9BQUEyQyxFQUFBLEtBQUEsQ0FDdEM5RixDQUVIeUUsY0FDU1MsQ0FBQUEsQ0F6RGpCLEVBNkRZNUUsZUFBYUUsU0FBUXVGLDJCQUE0QixHQUFBLEVBQ3JEN0csZUFBQThFLFNBQUF2QiwwQkFBQSxHQUFBLEVBQ0gvQyxnQkFBSXNFLFNBQUFSLFlBQUEsR0FBQSxFQUNEbEQsbUJBQXFCMEQsU0FBUzVELGlCQUFtQixHQUFBLEVBRXJENEUsU0FBVSxXQUNaLElBQUFoRixFQUFBSSxLQUFBQyxNQUFBQyxhQUFBQyxRQUFBLE9BQUEsQ0FBQSxFQXpEdUIsSUFBakJQLEVBQU02QixPQUNON0IsRUFBUUYsS0FBS0ksVUFBVVMsTUFJVCxnQkFEZGIsS0FBS0ksVUFBVVMsTUFBUVgsR0FFbkJHLGVBQWUsRUFDQyxnQkFBVEgsR0FDUEMsZ0JBQWdCLEVBRXBCSyxhQUFhRSxRQUFRLFFBQVNKLEtBQUtLLFVBQVVULENBQUssQ0FBQyxDQUUzRCxFQUVNa0YsVUFBWSxTQUFDQyxHQUNmLElBQ0kvRSxLQUFLQyxNQUFNOEUsQ0FBRyxDQUdsQixDQUZDLE1BQU1hLEdBQ0gsTUFBTyxDQUFBLENBQ1gsQ0FDQSxNQUFPLENBQUEsQ0FDWCxFQUVBL0gsU0FBU0ksaUJBQWlCLG1CQUFvQlIsSUFBSSxFQUNsREMsT0FBT08saUJBQWlCLE9BQVEsU0FBQ0ssR0FDN0IsSUFFVTZHLEVBRk56SCxPQUFPZ0YsU0FBU3VDLEtBQUtDLFNBQVMsR0FBRyxJQUUzQkMsRUFEVXpILE9BQU9nRixTQUFTdUMsS0FBS1ksTUFBTSxHQUFHLEVBQ3hCLEdBQ3RCN0UscUJBQXFCbUUsQ0FBSyxHQUU5QnpGLEtBQUtjLE1BQU02RSxTQUFXLFNBQ3RCUyxZQUFZLENBQ2hCLENBQUMsRUFFRHBJLE9BQU9PLGlCQUFpQixXQUFZLFNBQUNLLEdBQ2pDLElBRVU2RyxFQUZOekgsT0FBT2dGLFNBQVN1QyxLQUFLQyxTQUFTLEdBQUcsSUFFM0JDLEVBRFV6SCxPQUFPZ0YsU0FBU3VDLEtBQUtZLE1BQU0sR0FBRyxFQUN4QixHQUN0QjdFLHFCQUFxQm1FLENBQUssRUFFbEMsQ0FBQyxFQUNEekgsT0FBT08saUJBQWlCLG1CQUFvQixXQUN4QyxJQUNRMkIsRUFETE0sYUFBYUMsUUFBUSxPQUFPLEdBRVAsS0FEaEJQLEVBQVFNLGFBQWFDLFFBQVEsT0FBTyxHQUMvQnNCLFFBR0FxRCxVQUFVbEYsQ0FBSyxHQUdmbUcsTUFBTUMsUUFBUWhHLEtBQUtDLE1BQU1MLENBQUssQ0FBQyxHQUl4Q00sYUFBYUUsUUFBUSxRQUFTSixLQUFLSyxVQUFVLEVBQUUsQ0FBQyxFQUVwRHVFLFNBQVMsQ0FDYixDQUFDIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IG1lbnVfaXRlbXM7XHJcbmxldCB0aGVtZV9idG47XHJcbmxldCBib2R5O1xyXG5sZXQgd3JhcHBlcjtcclxuXHJcbmxldCBoYW1idXJnZXJfYnRuO1xyXG5sZXQgY2xvc2VfbWVudV9idG47XHJcbmxldCBtZW51X21vYmlsZTtcclxubGV0IG1lbnVfb3B0aW9uc19tb2JpbGU7XHJcblxyXG5sZXQgc2xpZGVfaG92ZXJfYnRucztcclxubGV0IHNsaWRlcl9idG5fbmV4dDtcclxubGV0IHNsaWRlcl9idG5fcHJldjtcclxubGV0IHNsaWRlcjtcclxubGV0IHNsaWRlcnM7XHJcbmxldCBjdXJyZW50U2xpZGUgPSAwO1xyXG5cclxubGV0IHNraWxsX2NhcmRzO1xyXG5sZXQgc2VjdGlvbnM7XHJcbmxldCBkb3RzO1xyXG5cclxubGV0IHN0YXJzO1xyXG5sZXQgYXJlVGhlcmVTdGFycyA9IGZhbHNlO1xyXG5cclxubGV0IHN0YXJ0WCA9IG51bGw7XHJcbmxldCBzdGFydFkgPSAwO1xyXG5cclxuY29uc3QgcGhvbmVRdWVyeSA9IHdpbmRvdy5tYXRjaE1lZGlhKCcobWF4LXdpZHRoOiA0ODBweCknKTtcclxuY29uc3QgdGFibGV0UXVlcnkgPSB3aW5kb3cubWF0Y2hNZWRpYSgnKG1heC13aWR0aDogNzY4cHgpJyk7XHJcbmNvbnN0IGRlc2t0b3BRdWVyeSA9IHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiA3NjhweCknKTtcclxuXHJcblxyXG5sZXQgcm9vdDtcclxuXHJcbmNvbnN0IG1haW4gPSAoKSA9PiB7XHJcbiAgICBwcmVwYXJlRE9NRWxlbWVudHMoKTtcclxuICAgIHByZXBhcmVET01FdmVudHMoKTtcclxuICAgIHNldFRoZW1lKCk7XHJcbn1cclxuXHJcbmNvbnN0IHByZXBhcmVET01FbGVtZW50cyA9ICgpID0+IHtcclxuICAgIHRoZW1lX2J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aGVtZV9idG4nKTtcclxuICAgIGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XHJcbiAgICBoYW1idXJnZXJfYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhhbWJ1cmdlcl9idG4nKTtcclxuICAgIGNsb3NlX21lbnVfYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNsb3NlX21lbnUnKTtcclxuICAgIG1lbnVfbW9iaWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnVfbW9iaWxlJyk7XHJcbiAgICBtZW51X29wdGlvbnNfbW9iaWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbnVfbW9iaWxlIGxpJyk7XHJcbiAgICByb290ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xyXG4gICAgc2VjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcud3JhcHBlciAuc2VjdGlvbicpO1xyXG4gICAgZG90cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5nbG9iYWxfbmF2IHVsIGxpIGEnKTtcclxuICAgIG1lbnVfaXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhLm1lbnUnKTtcclxuICAgIHNsaWRlX2hvdmVyX2J0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGUgYScpO1xyXG4gICAgc2xpZGVyX2J0bl9wcmV2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByZXZfYnRuJyk7XHJcbiAgICBzbGlkZXJfYnRuX25leHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV4dF9idG4nKTtcclxuICAgIHNsaWRlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGUnKTtcclxuICAgIHNsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXInKTtcclxuICAgIHdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud3JhcHBlcicpO1xyXG4gICAgc2tpbGxfY2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2tpbGxfY2FyZCcpO1xyXG59XHJcblxyXG5cclxuY29uc3QgcHJlcGFyZURPTUV2ZW50cyA9ICgpID0+IHtcclxuICAgIHRoZW1lX2J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNoYW5nZVRoZW1lKTtcclxuICAgIGhhbWJ1cmdlcl9idG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBtZW51SGFuZGxlcik7XHJcbiAgICBjbG9zZV9tZW51X2J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG1lbnVIYW5kbGVyKTtcclxuICAgIG1lbnVfb3B0aW9uc19tb2JpbGUuZm9yRWFjaChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG1lbnVIYW5kbGVyKSk7XHJcblxyXG4gICAgaWYgKGRlc2t0b3BRdWVyeS5tYXRjaGVzKSB7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhyb3R0bGVkV2hlZWwpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0YWJsZXRRdWVyeS5tYXRjaGVzKSB7XHJcbiAgICAgICAgd3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvdWNoID0gZXZlbnQudG91Y2hlc1swXTtcclxuICAgICAgICAgICAgc3RhcnRZID0gdG91Y2guY2xpZW50WTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhyb3R0bGVkVG91Y2gpO1xyXG4gICAgfVxyXG5cclxuICAgIGRvdHMuZm9yRWFjaChkb3QgPT4gZG90LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZG90QWN0aXZlSGFuZGxlcikpO1xyXG4gICAgbWVudV9pdGVtcy5mb3JFYWNoKGl0ZW0gPT4gaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG1lbnVJdGVtQWN0aXZlSGFuZGxlcikpXHJcblxyXG4gICAgc2xpZGVfaG92ZXJfYnRucy5mb3JFYWNoKGJ0biA9PiBidG4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgaG92ZXJPdmVyKSk7XHJcbiAgICBzbGlkZV9ob3Zlcl9idG5zLmZvckVhY2goYnRuID0+IGJ0bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIGhvdmVyT3V0KSk7XHJcbiAgICBzbGlkZXJfYnRuX25leHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBuZXh0U2xpZGUpO1xyXG4gICAgc2xpZGVyX2J0bl9wcmV2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcHJldlNsaWRlKTtcclxuXHJcbiAgICBzbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIChldmVudCkgPT4ge1xyXG4gICAgICAgIHN0YXJ0WCA9IGV2ZW50LnRvdWNoZXNbMF0uY2xpZW50WDtcclxuICAgIH0pXHJcbiAgICBzbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhyb3R0bGVkRGVsdGFYKTtcclxuICAgIHNsaWRlci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsICgpID0+IHtcclxuICAgICAgICBzdGFydFggPSBudWxsO1xyXG4gICAgfSlcclxuXHJcbiAgICBpZiAocGhvbmVRdWVyeS5tYXRjaGVzKSB7XHJcbiAgICAgICAgc2tpbGxfY2FyZHMuZm9yRWFjaChjYXJkID0+IGNhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aHJvdHRsZWRTa2lsbENhcmQpKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gVGhlIGZ1bmN0aW9uIGNoYW5nZXMgdGhlIHRoZW1lIG9mIHRoZSBwYWdlIHVzaW5nIHRoZSBjbGFzc2VzIGxpZ2h0X3RoZW1lIGFuZCBkYXJrX3RoZW1lLCB3aGljaFxyXG4vLyBhcmUgYWRkZWQgdG8gdGhlIGJvZHkuIEl0IGFsc28gY2hhbmdlcyB0aGUgY29sb3JzIGluIHJvb3QgYW5kIGFkZHMgdGhlIGN1cnJlbnQgdGhlbWUgdG9cclxuLy8gbG9jYWwgc3RvcmFnZS5cclxuY29uc3QgY2hhbmdlVGhlbWUgPSAoKSA9PiB7XHJcbiAgICBpZiAoYm9keS5jbGFzc0xpc3QudmFsdWUgPT09ICdsaWdodF90aGVtZScpIHtcclxuICAgICAgICBsZXQgdGhlbWUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0aGVtZScpKTtcclxuICAgICAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2xpZ2h0X3RoZW1lJyk7XHJcbiAgICAgICAgYm9keS5jbGFzc0xpc3QuYWRkKCdkYXJrX3RoZW1lJyk7XHJcblxyXG4gICAgICAgIHRoZW1lID0gYm9keS5jbGFzc0xpc3QudmFsdWU7XHJcblxyXG5cclxuICAgICAgICByb290Q29sb3JzRGFyaygpO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0aGVtZScsIEpTT04uc3RyaW5naWZ5KHRoZW1lKSk7XHJcblxyXG4gICAgfSBlbHNlIGlmIChib2R5LmNsYXNzTGlzdC52YWx1ZSA9PT0gJ2RhcmtfdGhlbWUnKSB7XHJcbiAgICAgICAgbGV0IHRoZW1lID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGhlbWUnKSlcclxuICAgICAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2RhcmtfdGhlbWUnKTtcclxuICAgICAgICBib2R5LmNsYXNzTGlzdC5hZGQoJ2xpZ2h0X3RoZW1lJyk7XHJcblxyXG4gICAgICAgIHRoZW1lID0gYm9keS5jbGFzc0xpc3QudmFsdWU7XHJcblxyXG4gICAgICAgIHJvb3RDb2xvcnNMaWdodCgpO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0aGVtZScsIEpTT04uc3RyaW5naWZ5KHRoZW1lKSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IHJvb3RDb2xvcnNMaWdodCA9ICgpID0+IHtcclxuICAgIHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0tbWFpbi10aGVtZScsICcjNkZEQ0JGJyk7XHJcbiAgICByb290LnN0eWxlLnNldFByb3BlcnR5KCctLWFjY2VudC10aGVtZScsICcjRjZGNEY2Jyk7XHJcbiAgICByb290LnN0eWxlLnNldFByb3BlcnR5KCctLXRleHQtdGhlbWUnLCAnIzQwNDA0MCcpO1xyXG59XHJcblxyXG5jb25zdCByb290Q29sb3JzRGFyayA9ICgpID0+IHtcclxuICAgIHJvb3Quc3R5bGUuc2V0UHJvcGVydHkoJy0tbWFpbi10aGVtZScsICcjNzc0MDY5Jyk7XHJcbiAgICByb290LnN0eWxlLnNldFByb3BlcnR5KCctLWFjY2VudC10aGVtZScsICcjMjkyNzJBJyk7XHJcbiAgICByb290LnN0eWxlLnNldFByb3BlcnR5KCctLXRleHQtdGhlbWUnLCAnI0ZBRkFGQScpO1xyXG59XHJcblxyXG5jb25zdCBtZW51SGFuZGxlciA9ICgpID0+IHtcclxuICAgIG1lbnVfbW9iaWxlLmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKTtcclxufVxyXG5cclxuLy8gVGhlIGZ1bmN0aW9uIHRyaWdnZXJzIHVwb24gY2xpY2tpbmcgYSBkb3QgYW5kIHJldHJpZXZlcyB0aGUgZGF0YSBhdHRyaWJ1dGUuXHJcbi8vIFRoZW4sIGl0IGl0ZXJhdGVzIHRocm91Z2ggZWFjaCBkb3QsIHJlbW92ZXMgaXRzIGFjdGl2ZSBjbGFzcywgYW5kXHJcbi8vIGNoZWNrcyB3aGljaCBkb3QgaW4gdGhlIGZvckVhY2ggbG9vcCBpcyBlcXVhbCB0byB0aGUgb25lIGNsaWNrZWQsXHJcbi8vIGFkZGluZyB0aGUgYWN0aXZlIGNsYXNzIHRvIGl0LiBUaGUgc2FtZSBsb2dpYyBhcHBsaWVzIHdoZW4gYWRkaW5nIHRoZSBhY3RpdmUgY2xhc3NcclxuLy8gdG8gdGhlIHNlY3Rpb24uXHJcbmNvbnN0IGRvdEFjdGl2ZUhhbmRsZXIgPSAoZXZlbnQpID0+IHtcclxuICAgIGNvbnN0IGRvdElkID0gZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnaHJlZicpLnNsaWNlKDEpXHJcbiAgICBzZWN0aW9ucy5mb3JFYWNoKHNlY3Rpb24gPT4ge1xyXG4gICAgICAgIHNlY3Rpb24uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgaWYgKGRvdElkID09PSBzZWN0aW9uLmlkKSB7XHJcbiAgICAgICAgICAgIHNlY3Rpb24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgIGRvdHMuZm9yRWFjaChkb3QgPT4ge1xyXG4gICAgICAgIGRvdC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgIH0pXHJcbiAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XHJcbn1cclxuXHJcblxyXG5jb25zdCBjaGVja0FjdGl2ZU1lbnVJdGVtcyA9IChpZCkgPT4ge1xyXG4gICAgc2VjdGlvbnMuZm9yRWFjaChzZWN0aW9uID0+IHtcclxuICAgICAgICBzZWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgIGlmIChpZCA9PT0gc2VjdGlvbi5pZCkge1xyXG4gICAgICAgICAgICBzZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgZG90cy5mb3JFYWNoKGRvdCA9PiB7XHJcbiAgICAgICAgZG90LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgIGlmIChpZCA9PT0gZG90LmdldEF0dHJpYnV0ZSgnaHJlZicpLnNsaWNlKDEpKSB7XHJcbiAgICAgICAgICAgIGRvdC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59XHJcbmNvbnN0IG1lbnVJdGVtQWN0aXZlSGFuZGxlciA9IChldmVudCkgPT4ge1xyXG4gICAgY29uc3QgaXRlbUlkID0gZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnaHJlZicpLnNsaWNlKDEpO1xyXG5cclxuICAgIGNoZWNrQWN0aXZlTWVudUl0ZW1zKGl0ZW1JZCk7XHJcbn1cclxuXHJcblxyXG4vLyBUaGUgZnVuY3Rpb24gdHJpZ2dlcmVkIGJ5IHNjcm9sbGluZywgaXRlcmF0ZXMgdGhyb3VnaCBhbGwgc2VjdGlvbnMgdXNpbmcgYSBmb3JFYWNoIGxvb3BcclxuLy8gYW5kIGNoZWNrcyBpZiBhIHBhcnRpY3VsYXIgc2VjdGlvbiBpcyB2aXNpYmxlIG9uIHRoZSBwYWdlLiBJZiBzbywgaXQgYWRkcyB0aGUgaW5kZXggb2YgdGhlIHNlY3Rpb25cclxuLy8gdG8gdGhlIGN1cnJlbnRrZXkgdmFyaWFibGUuXHJcbi8vIFRoZW4sIHRoZSBjaGVja1Njcm9sbFVwIGZ1bmN0aW9uIGV4YW1pbmVzIHdoZXRoZXIgYSBzY3JvbGwgdXAgb3IgZG93biBoYXMgYmVlbiBwZXJmb3JtZWQsIGFuZCBhY2NvcmRpbmdseVxyXG4vLyBhZGp1c3RzIHRoZSBjdXJyZW50a2V5IHVwd2FyZCBvciBkb3dud2FyZCB0byBkZXRlcm1pbmUgdGhlIHNlY3Rpb24gdG8gYmUgZGlzcGxheWVkLlxyXG5cclxuY29uc3QgZ2V0Q3VycmVudFNlY3Rpb25EZXNrdG9wID0gKGV2ZW50KSA9PiB7XHJcbiAgICBsZXQgY3VycmVudEtleSwgbmV4dEtleTtcclxuICAgIGxldCBzZWN0aW9uc0NvdW50ID0gc2VjdGlvbnMubGVuZ3RoO1xyXG5cclxuICAgIHNlY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKHNlY3Rpb24sIGtleSkge1xyXG4gICAgICAgIGNvbnN0IHJlY3QgPSBzZWN0aW9uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuICAgICAgICBpZiAocmVjdC50b3AgPD0gMC41ICYmIHJlY3QuYm90dG9tID49IDAuNSkge1xyXG4gICAgICAgICAgICBjdXJyZW50S2V5ID0ga2V5O1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChjaGVja1Njcm9sbFVwKGV2ZW50KSkge1xyXG4gICAgICAgIG5leHRLZXkgPSAoY3VycmVudEtleSA9PT0gMCkgPyAwIDogY3VycmVudEtleSAtIDE7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIG5leHRLZXkgPSAoY3VycmVudEtleSA9PT0gc2VjdGlvbnNDb3VudCAtIDEpID8gc2VjdGlvbnNDb3VudCAtIDEgOiBjdXJyZW50S2V5ICsgMTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGtleTogbmV4dEtleSxcclxuICAgICAgICBuZXh0OiBzZWN0aW9uc1tuZXh0S2V5XSxcclxuICAgIH1cclxufVxyXG5cclxuLy8gVGhlIGZ1bmN0aW9uIG9wZXJhdGVzIG9uIHRoZSBzYW1lIHByaW5jaXBsZSBhcyBhYm92ZSwgd2l0aCB0aGUgZGlmZmVyZW5jZSB0aGF0IGl0IGNoZWNrcyBmb3IgdG91Y2ggZXZlbnRzXHJcbi8vIGluc3RlYWQgb2Ygc2Nyb2xsaW5nLiBUaGUgZmluZ2VyIHN3aXBlIHVwIG9yIGRvd24gbXVzdCBiZSBncmVhdGVyL2xlc3MgdGhhbiAxMDBweCAoZm9yXHJcbi8vdGhlIHNsaWRlciB0byBmdW5jdGlvbiBjb3JyZWN0bHkpLlxyXG5mdW5jdGlvbiBnZXRDdXJyZW50U2VjdGlvbk1vYmlsZShldmVudCkge1xyXG4gICAgY29uc3QgdG91Y2ggPSBldmVudC50b3VjaGVzWzBdO1xyXG4gICAgY29uc3QgZGVsdGFZID0gdG91Y2guY2xpZW50WSAtIHN0YXJ0WTtcclxuXHJcbiAgICBsZXQgY3VycmVudEtleSwgbmV4dEtleTtcclxuICAgIGxldCBzZWN0aW9uc0NvdW50ID0gc2VjdGlvbnMubGVuZ3RoO1xyXG5cclxuICAgIHNlY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKHNlY3Rpb24sIGtleSkge1xyXG4gICAgICAgIGNvbnN0IHJlY3QgPSBzZWN0aW9uLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuICAgICAgICBpZiAocmVjdC50b3AgPD0gMC41ICYmIHJlY3QuYm90dG9tID49IDAuNSkge1xyXG4gICAgICAgICAgICBjdXJyZW50S2V5ID0ga2V5O1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChkZWx0YVkgPiAxMDApIHtcclxuICAgICAgICBuZXh0S2V5ID0gKGN1cnJlbnRLZXkgPT09IDApID8gMCA6IGN1cnJlbnRLZXkgLSAxO1xyXG4gICAgfSBlbHNlIGlmIChkZWx0YVkgPCAtIDEwMCkge1xyXG4gICAgICAgIG5leHRLZXkgPSAoY3VycmVudEtleSA9PT0gc2VjdGlvbnNDb3VudCAtIDEpID8gc2VjdGlvbnNDb3VudCAtIDEgOiBjdXJyZW50S2V5ICsgMTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGtleTogbmV4dEtleSxcclxuICAgICAgICBuZXh0OiBzZWN0aW9uc1tuZXh0S2V5XSxcclxuICAgIH1cclxufVxyXG5cclxuXHJcbmNvbnN0IHNlY3Rpb25BY3RpdmVIYW5kbGVyID0gKG5leHRTZWN0aW9uKSA9PiB7XHJcblxyXG4gICAgc2VjdGlvbnMuZm9yRWFjaChzZWN0aW9uID0+IHtcclxuICAgICAgICBpZiAobmV4dFNlY3Rpb24uaWQgPT09IHNlY3Rpb24uaWQpIHtcclxuICAgICAgICAgICAgc2VjdGlvbi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWN0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn1cclxuXHJcbmNvbnN0IGRvdFNjcm9sbEFjdGl2ZUhhbmRsZXIgPSAoZGF0YSkgPT4ge1xyXG5cclxuICAgIGRvdHMuZm9yRWFjaChmdW5jdGlvbiAoZG90LCBrZXkpIHtcclxuICAgICAgICBpZiAoZGF0YS5rZXkgPT09IGtleSkge1xyXG4gICAgICAgICAgICBkb3QuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZG90LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn1cclxuXHJcbi8vIFRoZSBmdW5jdGlvbiByZXRyaWV2ZXMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG5leHQgc2VjdGlvbiwgdGhlbiBzY3JvbGxzIGFjY29yZGluZ2x5XHJcbi8vIHRvIGl0cyBoZWlnaHQgYW5kIGFkZHMgdGhlIHNlY3Rpb24ncyBJRCB0byB0aGUgVVJMLlxyXG5jb25zdCBoYW5kbGVBY3RpdmVTZWN0aW9uRGVza3RvcCA9IChldmVudCkgPT4ge1xyXG4gICAgY29uc3QgZGF0YSA9IGdldEN1cnJlbnRTZWN0aW9uRGVza3RvcChldmVudCk7XHJcbiAgICBjb25zdCBuZXh0U2VjdGlvbiA9IGRhdGEubmV4dDtcclxuXHJcbiAgICBzZWN0aW9uQWN0aXZlSGFuZGxlcihuZXh0U2VjdGlvbik7XHJcbiAgICBkb3RTY3JvbGxBY3RpdmVIYW5kbGVyKGRhdGEpO1xyXG5cclxuICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gbmV4dFNlY3Rpb24uaWQ7XHJcblxyXG4gICAgd2luZG93LnNjcm9sbFRvKHtiZWhhdmlvcjogXCJzbW9vdGhcIiwgdG9wOiBuZXh0U2VjdGlvbi5vZmZzZXRUb3B9KTtcclxufVxyXG5cclxuY29uc3QgaGFuZGxlQWN0aXZlU2VjdGlvbk1vYmlsZSA9IChldmVudCkgPT4ge1xyXG4gICAgY29uc3QgZGF0YSA9IGdldEN1cnJlbnRTZWN0aW9uTW9iaWxlKGV2ZW50KTtcclxuICAgIGNvbnN0IG5leHRTZWN0aW9uID0gZGF0YS5uZXh0O1xyXG5cclxuICAgIHNlY3Rpb25BY3RpdmVIYW5kbGVyKG5leHRTZWN0aW9uKTtcclxuICAgIGRvdFNjcm9sbEFjdGl2ZUhhbmRsZXIoZGF0YSk7XHJcblxyXG4gICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSBuZXh0U2VjdGlvbi5pZDtcclxuXHJcbiAgICB3aW5kb3cuc2Nyb2xsVG8oe2JlaGF2aW9yOiBcInNtb290aFwiLCB0b3A6IG5leHRTZWN0aW9uLm9mZnNldFRvcH0pO1xyXG59XHJcblxyXG5jb25zdCBjaGVja1Njcm9sbFVwID0gKGV2ZW50KSA9PiB7XHJcbiAgICBpZiAoZXZlbnQud2hlZWxEZWx0YSkge1xyXG4gICAgICAgIHJldHVybiBldmVudC53aGVlbERlbHRhID4gMDtcclxuICAgIH1cclxuICAgIHJldHVybiBldmVudC5kZWx0YVkgPCAwO1xyXG59XHJcbmNvbnN0IGhvdmVyT3ZlciA9IChldmVudCkgPT4ge1xyXG4gICAgY29uc3Qgc2xpZGUgPSBldmVudC50YXJnZXQuY2xvc2VzdCgnLnNsaWRlJyk7XHJcblxyXG4gICAgc2xpZGUuY2xhc3NMaXN0LmFkZCgnaG92ZXInKTtcclxufVxyXG5cclxuY29uc3QgaG92ZXJPdXQgPSAoZXZlbnQpID0+IHtcclxuICAgIGNvbnN0IHNsaWRlID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5zbGlkZScpO1xyXG5cclxuICAgIHNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoJ2hvdmVyJyk7XHJcbn1cclxuXHJcblxyXG4vLyBGdW5jdGlvbnMgZm9yIHNsaWRpbmcgdGhlIHNsaWRlciwgcmV0cmlldmUgdGhlIGN1cnJlbnQgd2lkdGggb2YgdGhlIHNsaWRlLFxyXG4vLyBhbmQgdGhlbiBhcHByb3ByaWF0ZWx5IHNsaWRlIHRoZSBzbGlkZXIgdG8gdGhlIHJpZ2h0L2xlZnQgYnkgdGhlIHdpZHRoIG9mIHRoZSBzbGlkZS5cclxuXHJcbmNvbnN0IG5leHRTbGlkZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IHNsaWRlV2lkdGggPSBzbGlkZXJzW2N1cnJlbnRTbGlkZV0ub2Zmc2V0V2lkdGhcclxuICAgIGlmIChjdXJyZW50U2xpZGUgPCBzbGlkZXJzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICBjdXJyZW50U2xpZGUrKztcclxuICAgICAgICBjb25zdCBweFRvU2xpZGUgPSAoc2xpZGVXaWR0aCArIDIwKSAqIGN1cnJlbnRTbGlkZTtcclxuICAgICAgICBzbGlkZXIuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoLSR7cHhUb1NsaWRlfXB4KWA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNsaWRlci5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgwKWA7XHJcbiAgICAgICAgY3VycmVudFNsaWRlID0gMDtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgcHJldlNsaWRlID0gKCkgPT4ge1xyXG4gICAgY29uc3Qgc2xpZGVXaWR0aCA9IHNsaWRlcnNbY3VycmVudFNsaWRlXS5vZmZzZXRXaWR0aDtcclxuICAgIGNvbnN0IHNsaWRlclRyYW5zZm9ybSA9IHBhcnNlSW50KHNsaWRlci5zdHlsZS50cmFuc2Zvcm0uc2xpY2UoMTEsIC0zKSk7XHJcbiAgICBpZiAoY3VycmVudFNsaWRlID4gMCkge1xyXG4gICAgICAgIGN1cnJlbnRTbGlkZS0tO1xyXG4gICAgICAgIGNvbnN0IHB4VG9TbGlkZSA9IChzbGlkZXJUcmFuc2Zvcm0gKyBzbGlkZVdpZHRoICsgMjApO1xyXG4gICAgICAgIHNsaWRlci5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgke3B4VG9TbGlkZX1weClgO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBjaGVja0RlbHRhWCA9IChldmVudCkgPT4ge1xyXG4gICAgaWYgKHN0YXJ0WCAhPT0gbnVsbCkge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRYID0gZXZlbnQudG91Y2hlc1swXS5jbGllbnRYO1xyXG4gICAgICAgIGNvbnN0IGRlbHRhWCA9IGN1cnJlbnRYIC0gc3RhcnRYO1xyXG5cclxuICAgICAgICBpZiAoZGVsdGFYID4gMCkge1xyXG4gICAgICAgICAgICBwcmV2U2xpZGUoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBuZXh0U2xpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIEZ1bmN0aW9uIGZvciBhY3RpdmF0aW5nIHRoZSBza2lsbHMgY2FyZCBpbiB0aGUgbW9iaWxlIHZlcnNpb24uXHJcbi8vIEl0IHJldHJpZXZlcyBkYXRhIGZyb20gdGhlIGNhcmQgYW5kIGNoZWNrcyBpZiBpdCBoYXMgdGhlIGFjdGl2ZSBjbGFzczsgaWYgc28sXHJcbi8vIHRoZSBjYXJkIHJldHVybnMgdG8gaXRzIG9yaWdpbmFsIHBvc2l0aW9uLCBhbmQgY2xhc3NlcyBhcmUgcmVtb3ZlZCBmcm9tIHRoZSBjYXJkLlxyXG4vLyBJZiBpdCBkb2Vzbid0IGhhdmUgdGhlIGFjdGl2ZSBjbGFzcywgaXQgYWRkcyB0aGUgYWN0aXZlIGNsYXNzIHRvIHRoZSBjbGlja2VkIGNhcmQsXHJcbi8vIGFuZCB0aGUgcmVzdCByZWNlaXZlIHRoZSBoaWRlIGNsYXNzLiBUaGVuLCB0aGUgc2tpbGxDYXJkTW92ZUhhbmRsZSBmdW5jdGlvbiBhcHByb3ByaWF0ZWx5IG1vdmVzIHRoZSBjYXJkLlxyXG5cclxuY29uc3Qgc2tpbGxDYXJkSGFuZGxlciA9IChldmVudCkgPT4ge1xyXG4gICAgY29uc3QgY2FyZElEID0gZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpO1xyXG4gICAgY29uc3QgdGhpc0NhcmQgPSBldmVudC50YXJnZXQ7XHJcblxyXG4gICAgaWYgKHRoaXNDYXJkLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcclxuICAgICAgICB0aGlzQ2FyZC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgwKSc7XHJcblxyXG4gICAgICAgIHNraWxsX2NhcmRzLmZvckVhY2goY2FyZCA9PiB7XHJcbiAgICAgICAgICAgIGNhcmQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xyXG4gICAgICAgICAgICBjYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBza2lsbF9jYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY2FyZC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKSA9PT0gY2FyZElEKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzQ2FyZC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNhcmQuY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgc2tpbGxDYXJkTW92ZUhhbmRsZShjYXJkSUQsIHRoaXNDYXJkKTtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3Qgc2tpbGxDYXJkTW92ZUhhbmRsZSA9ICgkaWQsICRjYXJkKSA9PiB7XHJcbiAgICBjb25zdCBjYXJkSGVpZ2h0ID0gcGFyc2VJbnQoJGNhcmQub2Zmc2V0SGVpZ2h0KSArIDYwO1xyXG4gICAgc3dpdGNoICgkaWQpIHtcclxuICAgICAgICBjYXNlICcwJzpcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAkY2FyZC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgwKSc7XHJcbiAgICAgICAgICAgIH0sIDMwMClcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnMSc6XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgJGNhcmQuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVkoLSR7Y2FyZEhlaWdodH1weClgO1xyXG4gICAgICAgICAgICB9LCAzMDApXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJzInOlxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICRjYXJkLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVZKC0keyhjYXJkSGVpZ2h0KSoyfXB4KWA7XHJcbiAgICAgICAgICAgIH0sIDMwMClcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIEZ1bmN0aW9uIGZvciBsaW1pdGluZyB0aGUgZXhlY3V0aW9uIG9mIGEgZnVuY3Rpb24uXHJcbmZ1bmN0aW9uIHRocm90dGxlKGZ1bmMsIGRlbGF5KSB7XHJcbiAgICBsZXQgbGFzdENhbGwgPSAwO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIGlmIChub3cgLSBsYXN0Q2FsbCA+PSBkZWxheSkge1xyXG4gICAgICAgICAgICBmdW5jKGV2ZW50KTtcclxuICAgICAgICAgICAgbGFzdENhbGwgPSBub3c7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBjcmVhdGVTdGFycyA9ICgpID0+IHtcclxuICAgIGxldCB3aW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgbGV0IHdpbmRvd0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuXHJcbiAgICBpZiAocGhvbmVRdWVyeS5tYXRjaGVzKSB7XHJcbiAgICAgICAgc3RhcnMgPSA0MDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc3RhcnMgPSA4MDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYXJlVGhlcmVTdGFycyA9PT0gZmFsc2UpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaTxzdGFyczsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1N0YXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgICAgIGxldCByYW5kb21YID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogd2luZG93V2lkdGgpO1xyXG4gICAgICAgICAgICBsZXQgcmFuZG9tWSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHdpbmRvd0hlaWdodCk7XHJcblxyXG4gICAgICAgICAgICBuZXdTdGFyLmNsYXNzTGlzdC5hZGQoJ3N0YXInKTtcclxuICAgICAgICAgICAgd3JhcHBlci5hcHBlbmQobmV3U3Rhcik7XHJcblxyXG4gICAgICAgICAgICBuZXdTdGFyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtyYW5kb21YfXB4LCAke3JhbmRvbVl9cHgpYDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhcmVUaGVyZVN0YXJzID0gdHJ1ZTtcclxufVxyXG5cclxuY29uc3QgdGhyb3R0bGVkV2hlZWwgPSB0aHJvdHRsZShoYW5kbGVBY3RpdmVTZWN0aW9uRGVza3RvcCwgNTAwKTtcclxuY29uc3QgdGhyb3R0bGVkVG91Y2ggPSB0aHJvdHRsZShoYW5kbGVBY3RpdmVTZWN0aW9uTW9iaWxlLCA1MDApO1xyXG5jb25zdCB0aHJvdHRsZWREZWx0YVggPSB0aHJvdHRsZShjaGVja0RlbHRhWCwgNTAwKTtcclxuY29uc3QgdGhyb3R0bGVkU2tpbGxDYXJkID0gdGhyb3R0bGUoc2tpbGxDYXJkSGFuZGxlciwgNTAwKTtcclxuXHJcbmNvbnN0IHNldFRoZW1lID0gKCkgPT4ge1xyXG4gICAgbGV0IHRoZW1lID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGhlbWUnKSk7XHJcblxyXG4gICAgaWYgKHRoZW1lLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHRoZW1lID0gYm9keS5jbGFzc0xpc3QudmFsdWU7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RoZW1lJywgSlNPTi5zdHJpbmdpZnkodGhlbWUpKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYm9keS5jbGFzc0xpc3QudmFsdWUgPSB0aGVtZTtcclxuICAgICAgICBpZiAodGhlbWUgPT09ICdkYXJrX3RoZW1lJykge1xyXG4gICAgICAgICAgICByb290Q29sb3JzRGFyaygpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhlbWUgPT09J2xpZ2h0X3RoZW1lJykge1xyXG4gICAgICAgICAgICByb290Q29sb3JzTGlnaHQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RoZW1lJywgSlNPTi5zdHJpbmdpZnkodGhlbWUpKTtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgY2hlY2tKU09OID0gKHN0cikgPT4ge1xyXG4gICAgdHJ5e1xyXG4gICAgICAgIEpTT04ucGFyc2Uoc3RyKTtcclxuICAgIH1jYXRjaChlKXtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIG1haW4pO1xyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIChldmVudCkgPT4ge1xyXG4gICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKFwiI1wiKSkge1xyXG4gICAgICAgIGNvbnN0IHNwbGl0SWQgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgnIycpO1xyXG4gICAgICAgIGNvbnN0IHVybElkID0gc3BsaXRJZFsxXTtcclxuICAgICAgICBjaGVja0FjdGl2ZU1lbnVJdGVtcyh1cmxJZCk7XHJcbiAgICB9XHJcbiAgICBib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcbiAgICBjcmVhdGVTdGFycygpO1xyXG59KVxyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgKGV2ZW50KSA9PiB7XHJcbiAgICBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoXCIjXCIpKSB7XHJcbiAgICAgICAgY29uc3Qgc3BsaXRJZCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCcjJyk7XHJcbiAgICAgICAgY29uc3QgdXJsSWQgPSBzcGxpdElkWzFdO1xyXG4gICAgICAgIGNoZWNrQWN0aXZlTWVudUl0ZW1zKHVybElkKTtcclxuICAgIH1cclxufSk7XHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCk9PntcclxuICAgIGlmKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0aGVtZScpKXtcclxuICAgICAgICBsZXQgdGhlbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndGhlbWUnKTtcclxuICAgICAgICBpZih0aGVtZS5sZW5ndGggPT09IDApe1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGhlbWUnLCBKU09OLnN0cmluZ2lmeShbXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKCFjaGVja0pTT04odGhlbWUpKXtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RoZW1lJywgSlNPTi5zdHJpbmdpZnkoW10pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZighQXJyYXkuaXNBcnJheShKU09OLnBhcnNlKHRoZW1lKSkpe1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndGhlbWUnLCBKU09OLnN0cmluZ2lmeShbXSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1lbHNle1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0aGVtZScsIEpTT04uc3RyaW5naWZ5KFtdKSk7XHJcbiAgICB9XHJcbiAgICBzZXRUaGVtZSgpO1xyXG59KVxyXG4iXX0=
